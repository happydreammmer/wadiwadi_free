<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wadi Wadi - Instagram Analyzer</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <h1>üåä Wadi Wadi</h1>
                    <p class="logo-subtitle">Instagram Analyzer</p>
                </div>
            </div>
            <div class="status" id="status">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Checking page...</span>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="profile">
                üë§ Profile Extraction
            </button>
            <button class="tab-btn" data-tab="media">
                üì• Media Download
            </button>
            <button class="tab-btn" data-tab="ai-analysis">
                ü§ñ AI Analysis
            </button>
        </div>

        <div class="main-content">
            <!-- Profile Data Tab -->
            <div class="tab-panel active" id="profileTab">
                <section class="profile-section" id="profileSection">
            <h2>Profile Data</h2>
            <div class="profile-header">
                <div class="profile-picture-container">
                    <div class="profile-picture-placeholder" id="profilePicturePlaceholder">
                        <span>üë§</span>
                    </div>
                </div>
                <div class="profile-basic-info">
                    <div class="profile-item username-item">
                        <span id="username" class="username-text">-</span>
                        <span id="privateBadge" class="private-badge" style="display: none;">üîí</span>
                    </div>
                    <div class="profile-category" id="profileCategory" style="display: none;"></div>
                </div>
                <div class="extract-button-container">
                    <button id="extractBtn" class="btn btn-primary extract-btn-top">
                        üîÑ Extract Data
                    </button>
                </div>
            </div>
            
            <div class="profile-stats">
                <div class="stat-item">
                    <span class="stat-number" id="posts">-</span>
                    <span class="stat-label">Posts</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="followers">-</span>
                    <span class="stat-label">Followers</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="following">-</span>
                    <span class="stat-label">Following</span>
                </div>
            </div>

            <div class="profile-details">
                <div class="profile-item bio-item" id="bioContainer" style="display: none;">
                    <label>Bio:</label>
                    <p id="bio"></p>
                </div>
                <div class="profile-item url-item" id="urlContainer" style="display: none;">
                    <label>Website:</label>
                    <a id="externalUrl" href="" target="_blank" rel="noopener noreferrer"></a>
                </div>
            </div>

            <div class="button-row-compact">
                <button id="copyAllBtn" class="btn btn-secondary" disabled>
                    üìã Copy All Data
                </button>
                <button id="exportBtn" class="btn btn-secondary" disabled>
                    üíæ Export JSON
                </button>
            </div>
        </section>
            </div>

            <!-- Media Download Tab -->
            <div class="tab-panel" id="mediaTab">
                <section class="media-section" id="mediaSection">
            <div class="section-header">
                <h2>Media Downloads</h2>
                <div class="header-controls">
                    <div class="media-filter">
                        <select id="mediaFilter">
                            <option value="all">All Media</option>
                            <option value="images">Images Only</option>
                            <option value="albums">Albums Only</option>
                            <option value="reels">Reels Only</option>
                        </select>
                    </div>
                    <button class="settings-toggle" id="settingsToggle" title="Settings">‚öôÔ∏è</button>
                </div>
            </div>
            
            <div class="media-stats">
                <div class="stats-info">
                    <span>Found: <span id="mediaCount">0</span> items</span>
                    <span id="selectedCount" style="display: none;">Selected: <span id="selectedNumber">0</span></span>
                </div>
                <button id="scanMediaBtn" class="btn btn-small">
                    üîç Scan Media
                </button>
            </div>
            
            <div class="settings-panel" id="settingsPanel">
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="highQualityOnly" checked>
                        High quality only
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="includeVideos" checked>
                        Include videos
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="organizeByDate">
                        Organize by date
                    </label>
                </div>
                <div class="setting-item">
                    <label for="filenameFormat">Filename format:</label>
                    <select id="filenameFormat">
                        <option value="username_index">username_001</option>
                        <option value="username_postid">username_postID</option>
                        <option value="postid_only">postID only</option>
                    </select>
                </div>
            </div>
            
            <div class="media-controls">
                <button id="downloadAllBtn" class="btn btn-primary" disabled>
                    ‚¨áÔ∏è Download Selected
                </button>
                <button id="selectAllBtn" class="btn btn-secondary">
                    ‚òëÔ∏è Select All
                </button>
            </div>
            
            <div class="download-progress" id="downloadProgress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Preparing download...</div>
            </div>
            
            <div class="media-grid-container">
                <div class="media-grid" id="mediaGrid">
                    <!-- Media items will be populated here -->
                </div>
            </div>
        </section>
            </div>

            <!-- AI Analysis Tab -->
            <div class="tab-panel" id="ai-analysisTab">
                <section class="ai-section">
                    <h2>AI-Powered Analysis</h2>
                    <div class="api-key-section">
                        <label for="apiKey">Gemini API Key:</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="apiKey" placeholder="Enter your Gemini API key">
                            <button id="saveApiKeyBtn" class="btn btn-secondary">Save</button>
                        </div>
                    </div>

                    <div class="analysis-mode-section">
                        <label>Analysis Mode:</label>
                        <div class="radio-group">
                            <label><input type="radio" name="analysisMode" value="my_profile" checked> My Profile</label>
                            <label><input type="radio" name="analysisMode" value="competitor"> Competitor</label>
                        </div>
                    </div>

                    <button id="analyzeProfileBtn" class="btn btn-primary" disabled>
                        Analyze This Profile
                    </button>

                    <div class="media-selection-modal" id="mediaSelectionModal">
                        <div class="media-selection-content">
                            <h3>Select Media for Analysis</h3>
                            <p>Choose up to 5 images and 5 videos.</p>
                            <div class="selection-counters">
                                <span id="imageSelectionCount">Images: 0/5</span>
                                <span id="videoSelectionCount">Videos: 0/5</span>
                            </div>
                            <div class="media-selection-grid" id="mediaSelectionGrid"></div>
                            <div class="media-selection-actions">
                                <button id="confirmAnalysisBtn" class="btn btn-primary" disabled>Analyze Selection</button>
                                <button id="cancelAnalysisBtn" class="btn btn-secondary">Cancel</button>
                            </div>
                        </div>
                    </div>

                    <div class="analysis-results-section" id="analysisResultsSection" style="display: none;">
                        <h3>Analysis Results</h3>
                        <div id="analysisResult" class="analysis-result-content"></div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner"></div>
            <p id="loadingText">Processing...</p>
        </div>

        <!-- Error Message -->
        <div class="error-message" id="errorMessage">
            <p id="errorText"></p>
            <button id="closeErrorBtn">‚úï</button>
        </div>
        
        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>
    </div>

    <script src="popup.js"></script>
</body>
</html>